<!DOCTYPE html>
<html lang="en" class="scroll_auto">

<head>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge">
  <meta name="viewport" content="width=device-width, initial-scale=2.0, maximum-scale=1.0, minimum-scale=1.0">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta property="og:image" content="https://vr.miceview.kr/path/og_ep.jpg">
  <link rel="icon" href="https://vr.miceview.kr/path/favi_ep.png">
  <meta name="keywords" content="2021 APAAC">
  <meta name="description" content="2021 APAAC">
  <meta name="robots" content="all">
  <meta property="og:url" content>
  <meta property="og:description" content="2021 APAAC">
  <meta property="og:title" content="2021 APAAC">

  <!-- 필수: babel -->
  <script src="//cdnjs.cloudflare.com/ajax/libs/babel-standalone/6.26.0/babel.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/babel-polyfill/7.12.1/polyfill.min.js"></script>
  <script src="https://unpkg.com/core-js-bundle@3.8.1/index.js"></script>
  <script src="https://unpkg.com/regenerator-runtime@0.13.7/runtime.js"></script>
  
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-PR9KVF2NB5"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
  
    gtag('config', 'G-PR9KVF2NB5');
  </script>

  <!-- Style include -->
  <script src="https://vr.miceview.kr/path/assets/js/jquery-3.5.1.min.js"></script>
  
  <!-- library -->
  <link href="css/owl.carousel.min.css" rel="stylesheet">
  <script src="js/owl.carousel.min.js"></script>

  <!-- general style -->
  <link href="https://cdn.zipview.kr/public/fonts/common.css" rel="stylesheet">
  <link rel="stylesheet" type="text/css" href="css/olim_general.css">
  <script src="js/olim_general.js"></script>

  <!-- project -->
  <link rel="stylesheet" type="text/css" href="css/common.css">
  <script src="js/common.js"></script>

  <!-- 필수: VUE 삽입 -->
  <script src="https://cdn.jsdelivr.net/npm/vue@2.6.0"></script>
  <script src="https://unpkg.com/axios/dist/axios.min.js"></script>

  <title>2021 APAAC</title>
</head>

<body class="not_ctr">
  <div id="app" style="display: none">
    <!-- header -->
  <header class="header" id="header">
    <a class="site_logo" href="index.html"><h1>2021 BIO KOREA International Convention</h1></a>
    <!-- gnb -->
    <nav class="gnb">
      <h2 class="ir_text">Main menu</h2>
      <button type="button" class="gnb-btn"><span class="ir_text">Main menu</span></button>
      <div class="gnb-wrap">
        <ul class="gnb-list">
          <li class="gnb-item">
            <a href="entry-en.html"><span class="gnb-title">ENTRANCE</span></a>
          </li>
          <li class="gnb-item">
            <a href="cosmetic-en.html"><span class="gnb-title">COSMETIC ZONE</span></a>
          </li>
          <li class="gnb-item">
            <a href="medical-en.html"><span class="gnb-title">MEDICAL ZONE</span></a>
          </li>
          <!-- <li class="gnb-item">
            <a href="conference-ko.html"><span class="gnb-title">컨퍼런스 홀</span></a>
          </li> -->
          <li class="gnb-item is_selected">
            <a href="search-ko.html"><span class="gnb-title">EXHIBITOR LIST</span></a>
          </li>
        </ul>
      </div>
    </nav>
    <!-- //gnb -->
    <div class="breadcrumbs ir_text" role="navigation" style="display:none;">
      <ol class="breadcrumbs_list">
        <li class="breadcrumbs_item">
          <strong><span class="is_now">2021 BIO KOREA International Convention</span></strong>
        </li>
      </ol>
    </div>
    <div class="global">
      <ul class="global-list">
        <!-- <li class="global-item"><button type="button" class="btn_help_pop"><span class="ir_text">Control guide</span></button></li> -->
      </ul>
    </div>
  </header>
  <!-- //header -->

    <!-- container / add page class -->
    <div class="container search_company search_company2">
      <!-- contents/본문 -->
      <div class="contents">
        <h2 class="search_company-title">Exhibitor List</h2>

        <div class="search_wrap width_stand">
          <!-- inp_custom -->
          <span class="inp_sel_wrap inp_custom inp_s_type">
            <select class="inp_sel form-select" title="Select" id="cateSelect" v-model="selectedCategory">
              <option value="">Select category</option>
              <option v-for="(group, index) in groups" v-bind:value="group.id" v-text="group.name">
              </option>
            </select>
          </span>
          <div class="inp_txt_wrap inp_search-wrap">
            <label for="value">Search</label>
            <input onkeyup="filter()" type="text" id="value" name="inp_c_search" class="inp_txt inp_c_search"
              title="Search.">
            <button type="submit" class="search_btn" onclick="filter()"><span class="ir_text">Search</span></button>
          </div>
        </div>

        <div class="search_company-wrap">
          <ul class="search_company-list">
            <li class="search_company-item" v-for="partner in filteredPartners" :key="partner.id">
              <span class="ir_text search_hdn_keyword"> </span>
              <div class="company_logo">
                <!-- [D] 로고 이미지가 없는 경우 -->
                <img
                  :src="getURL(partner.responses, 'eTypDOU5UC') ? getURL(partner.responses, 'eTypDOU5UC') : 'https://vr.miceview.kr/path/assets/images/logo-default.jpg'"
                  @error="imgError">
              </div>
              <div class="company_info">
                <strong class="company_list-name"
                  v-text="getData(partner.responses, 'c8FV46UFlK')"></strong>
                <!-- 없을 경우 공란 처리 -->
                <div class="company_tag"></div>
              </div>
              <div class="btn_wrap">
                <!-- [D] 씬 아이디를 포함해 해당 부스로 이동합니다. -->
                <a :href="getData(partner.responses, '9O5OQh2fC6')" class="btn"><span>Go</span></a>
              </div>
            </li>
          </ul>
        </div>
      </div>
      <!-- //contents/본문 -->
    </div>
    <!-- //container -->
  </div>

</body>

</html>

<script type="text/babel" data-presets="es2015, stage-3">
  new Vue({
    el: '#app',
    data: {
      projects: ['YkicOd3Vrm'],
      partners: [],
      filteredPartners: [],
      groups: [],
      selectedCategory: '',
    },
    computed: {},
    created: function() {
      document.getElementById('app').style.display = 'block';
      this.getPartners();
      this.getGroups();
    },
    watch: {
      selectedCategory: function(groupID) {
        if (groupID) {
          this.filteredPartners = this.partners.filter(function (partner) {
            return partner.groupID === groupID
          });
        } else {
          this.filteredPartners = this.partners;
        }
      }
    },
    methods: {
      getPartners: async function () {
        for(let i in this.projects) {
          let { data } = await axios.get('https://cdms.olimzone.com/v1/projects/'+ this.projects[i] +'/partners?scope=responses');
          this.partners.push(...data);
        }
        this.filteredPartners = this.partners;
      },
      getGroups: async function () {
        for(let i in this.projects) {
          let { data } = await axios.get('https://cdms.olimzone.com/v1/projects/'+ this.projects[i] +'/groups');
          this.groups.push(...data);
        }
      },
      getData: function (responses, id) {
        if(!responses || !id) { return '';}

        const response = responses.find(function (response) {
          return response.formID === id;
        });

        if(!response) { return ''; }
        return response.data;
      },
      getURL: function (responses, id) {
        if(!responses || !id) { return '';}

        const response = responses.find(function (response) {
          return response.formID === id;
        });
        
        if(!response) { return ''; }
        if(!response.files || !response.files[0]) { return ''; }

        return response.files[0].url;
      },
      imgError: function (e) {
        e.target.src = 'https://vr.miceview.kr/path/assets/images/logo-default.jpg';
      },
    },
  });

  function filter() {
    var value, name, item, i, keyword, member;
    value = document.getElementById("value").value.toUpperCase();
    item = document.getElementsByClassName("search_company-item");

    for (i = 0; i < item.length; i++) {
      name = item[i].getElementsByClassName("company_list-name");
      keyword = item[i].getElementsByClassName("search_hdn_keyword");
      member = item[i].getElementsByClassName("company_tag");
      if (name[0].innerHTML.toUpperCase().indexOf(value) > -1 || keyword[0].innerHTML.toUpperCase().indexOf(value) > -1 || member[0].innerHTML.toUpperCase().indexOf(value) > -1) {
        item[i].style.display = "block";
      } else {
        item[i].style.display = "none";
      }
    }
  }
</script>
